(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t){},172:function(e,t,a){"use strict";a.r(t);var n,r,o,l=a(1),c=a.n(l),i=a(22),s=a.n(i),u=(a(84),a(8)),d=a(9),h=a(11),m=a(10),p=a(12),g=a(5),f=a(18),b=a(4),E=a(2),O=a(176),j=a(174),v=a(15),y=function(e){return{type:"SET",data:e}},w=function(e){return{type:"FOLLOW",data:e}},k=function(e){return{type:"UNFOLLOW",data:e}},C=(a(90),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).currentUser={firstName:"",lastName:"",id:"",followedVacations:[],isAdmin:!1},a.state={username:"",password:"",sumbitted:!1,msg:"",logged:!1,adminLog:!1},a.getChangedValue=a.getChangedValue.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a.checkAndLogin=a.checkAndLogin.bind(Object(b.a)(Object(b.a)(a))),a.props.logOut(),Object(b.a)(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"getChangedValue",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();this.state.username,this.state.password;""!=this.state.username||""!=this.state.password?this.checkAndLogin():this.setState(Object(g.a)({},this.state,{msg:"Empty Inputs"}))}},{key:"checkAndLogin",value:function(){var e=this,t={username:this.state.username,password:this.state.password};fetch("http://localhost:3000/checkexist",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.username})}).then(function(e){return e.json()}).then(function(a){a!={}?e.login(t):e.setState(Object(g.a)({},e.state,{msg:"Missing Password or Username"}))}).catch(function(e){return e})}},{key:"login",value:function(e){var t=this;fetch("http://localhost:3000/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){t.currentUser.firstName=e.firstName,t.currentUser.lastName=e.lastName,t.currentUser.isAdmin=e.isAdmin,t.currentUser.id=e.id,t.props.logIn(t.currentUser),t.setState(Object(g.a)({},t.state,{logged:!0}))}).catch(function(e){var a=Object(g.a)({},t.state,{msg:"Wrong Username Or missing Info",logged:!1});t.setState(a)})}},{key:"render",value:function(){return c.a.createElement("div",null,this.state.logged?this.props.currentUser.isAdmin?c.a.createElement(O.a,{to:"/admin"}):c.a.createElement(O.a,{to:"/vacations"}):null,c.a.createElement(E.i,{sm:"12",md:{size:6,offset:3}},c.a.createElement(E.o,null,c.a.createElement("h1",{className:"text-center"},"Log In"),c.a.createElement("form",null,c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"Username "),c.a.createElement(E.l,{invalid:""!=this.state.msg,type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.getChangedValue}),c.a.createElement(E.k,{tooltip:!0},this.state.msg)),c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"Password "),c.a.createElement(E.l,{required:!0,type:"password",name:"password",value:this.state.password,placeholder:"Password",onChange:this.getChangedValue})),c.a.createElement("br",null),c.a.createElement(E.c,{type:"button",color:"primary",className:"float-right",onClick:this.handleSubmit},"Log In"),c.a.createElement(j.a,{to:"/register",className:"btn btn-link"},"  Not a Member ?")))))}}]),t}(l.Component)),V=Object(v.b)(function(e){return{currentUser:e.currentUser}},function(e){return{logIn:function(t){return e(function(e){return{type:"LOGIN",data:e}}(t))},logOut:function(){return e({type:"LOGOUT"})}}})(C),D=a(173),N=a(178),S=a(177),U=a(77),T=a.n(U),A=a(175),x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",firstName:"",lastName:"",msg:"",registered:!1},a.getChangedValue=a.getChangedValue.bind(Object(b.a)(Object(b.a)(a))),a.register=a.register.bind(Object(b.a)(Object(b.a)(a))),a.validiateUsername=a.validiateUsername.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"getChangedValue",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"register",value:function(){var e=this;fetch("http://localhost:3000/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(g.a)({},this.state))}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState(Object(g.a)({},e.state,{registered:!0}))}).catch(function(e){return e})}},{key:"validiateUsername",value:function(){var e=this;fetch("http://localhost:3000/checkexist",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.username})}).then(function(e){return e.json()}).then(function(t){Object.keys(t).length?e.setState(Object(g.a)({},e.state,{msg:"Taken Username"})):e.setState(Object(g.a)({},e.state,{msg:""}))}).catch(function(e){return e})}},{key:"render",value:function(){return c.a.createElement(E.i,{sm:"12",md:{size:6,offset:3}},this.state.registered&&c.a.createElement(A.a,{to:"/login"}),c.a.createElement(E.o,null,c.a.createElement("h1",{className:"text-center"},"Register"),c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"First Name "),c.a.createElement(E.l,{type:"text",name:"firstName",value:this.state.firstName,placeholder:"First Name",onChange:this.getChangedValue})),c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"Last Name "),c.a.createElement(E.l,{type:"text",name:"lastName",value:this.state.lastName,placeholder:"Last Name",onChange:this.getChangedValue})),c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"Username "),c.a.createElement(E.l,{invalid:""!=this.state.msg,type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.getChangedValue,onBlur:this.validiateUsername}),""!=this.state.msg?c.a.createElement(E.k,{tooltip:!0},this.state.msg):null),c.a.createElement("br",null),c.a.createElement(E.m,null,c.a.createElement(E.n,{addonType:"prepend"},"Password "),c.a.createElement(E.l,{type:"password",name:"password",value:this.state.password,placeholder:"Password",onChange:this.getChangedValue})),c.a.createElement("br",null),c.a.createElement(E.c,{color:"primary",onClick:this.register,className:"float-right",disabled:""!=this.state.msg},"Register"),c.a.createElement(j.a,{to:"/login"}," Back ")))}}]),t}(l.Component),F=a(25),L=a.n(F),I=a(38),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={destination:"",description:"",startDate:"",endDate:"",cost:0,img:"",validForm:!0,errorMsg:""},a.getChangedValue=a.getChangedValue.bind(Object(b.a)(Object(b.a)(a))),a.sendNewVacation=a.sendNewVacation.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState(this.props.vacation)}},{key:"getChangedValue",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"validateForm",value:function(){var e=[];""!==this.state.description&&"undefined"!==typeof this.state.description||e.push("Missing Description"),""!==this.state.destination&&"undefined"!==typeof this.state.destination||e.push("Missing Destination"),""!==this.state.startDate&&"undefined"!==typeof this.state.startDate||e.push("Missing Start Date"),""!==this.state.endDate&&"undefined"!==typeof this.state.endDate||e.push("Missing End Date"),(0===this.state.cost||this.state.cost.length>9)&&e.push("Invalid Cost"),e.length>0?this.setState(Object(g.a)({},this.state,{validForm:!1,errorMsg:e.join(" , ")})):this.setState(Object(g.a)({},this.state,{validForm:!0}))}},{key:"sendNewVacation",value:function(){var e=Object(I.a)(L.a.mark(function e(){var t;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validateForm();case 2:if(delete(t=Object(g.a)({},this.state)).validForm,delete t.errorMsg,!this.state.validForm){e.next=8;break}return e.next=8,this.props.edit(t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cutDateInfo",value:function(e){return e.length>10?e.substring(0,9):e}},{key:"render",value:function(){this.props.vacation;return c.a.createElement(E.p,{isOpen:this.props.modal,toggle:this.props.toggle},c.a.createElement(E.s,null,"Edit Vacation"),c.a.createElement(E.q,null,this.state.validForm?null:c.a.createElement(E.a,{color:"danger",id:"error"},c.a.createElement("h4",{className:"alert-heading"},"Not Valid"),this.state.errorMsg),c.a.createElement("div",{className:"container"},c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"destination",value:this.state.destination,type:"text",name:"destination",onChange:this.getChangedValue,required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"description",value:this.state.description,type:"text",name:"description",onChange:this.getChangedValue,required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:6},"From",c.a.createElement(E.l,{placeholder:"startDate",value:this.state.startDate,type:"date",name:"startDate",onChange:this.getChangedValue,required:!0})),c.a.createElement(E.i,{md:6},"To",c.a.createElement(E.l,{placeholder:"endDate",value:this.state.endDate,type:"date",name:"endDate",onChange:this.getChangedValue,required:!0})))," ",c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:9},c.a.createElement(E.l,{placeholder:"Cost",value:this.state.cost,type:"number",name:"cost",onChange:this.getChangedValue,required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"Image Url",value:this.state.img,type:"text",name:"img",onChange:this.getChangedValue,required:!0}))))),c.a.createElement(E.r,null,c.a.createElement(E.c,{color:"danger",onClick:this.sendNewVacation},"Update "),c.a.createElement(E.c,{color:"secondary",onClick:this.props.toggle},"Cancel")))}}]),t}(l.Component),P=(a(98),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1},a.deleteVacation=a.deleteVacation.bind(Object(b.a)(Object(b.a)(a))),a.updateVacation=a.updateVacation.bind(Object(b.a)(Object(b.a)(a))),a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"deleteVacation",value:function(){this.props.delete(this.props.vacation.id)}},{key:"updateVacation",value:function(e){this.setState(Object(g.a)({},this.state,{modal:!0})),this.props.update(this.props.vacation.id,e),this.toggle()}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var e=this.props.vacation;return c.a.createElement("tr",null,c.a.createElement("th",{scope:"row"},this.props.index+1),c.a.createElement("td",null,e.destination),c.a.createElement("td",null,e.description),c.a.createElement("td",{className:"imgUrl"},e.img),c.a.createElement("td",null,e.startDate),c.a.createElement("td",null,e.endDate),c.a.createElement("td",null,"$",e.cost),c.a.createElement("td",null,c.a.createElement("i",{onClick:this.toggle,className:"fas fa-pen-fancy",style:{fontSize:"24px",color:"red"}}),c.a.createElement("i",{onClick:this.deleteVacation,className:"fas fa-trash-alt",style:{fontSize:"24px"}})),c.a.createElement(M,{edit:this.updateVacation,vacation:this.props.vacation,modal:this.state.modal,toggle:this.toggle}))}}]),t}(l.Component)),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).logout=a.logout.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"logout",value:function(){this.props.loggingOut(),this.props.logOut()}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(E.w,{color:this.props.currentUser.isAdmin?"dark":"light",light:!0,expand:"sm"},c.a.createElement(E.x,{style:this.props.currentUser.isAdmin?{color:"blue"}:{color:"black"}}," Vacations "),c.a.createElement(E.y,null),c.a.createElement(E.j,{navbar:!0},c.a.createElement(E.t,{className:"ml-auto",navbar:!0},c.a.createElement(E.u,null,c.a.createElement(E.v,{style:this.props.currentUser.isAdmin?{color:"blue"}:{color:"black"}},"Hello ",this.props.currentUser.firstName)),c.a.createElement(E.u,null,c.a.createElement(E.c,{type:"button",color:"link",onClick:this.logout},"Log Out")),this.props.currentUser.isAdmin?c.a.createElement(E.u,null,c.a.createElement(E.c,{color:"link",onClick:this.props.toggle},"Add New Vacation"),c.a.createElement(E.c,{color:"link"},c.a.createElement(j.a,{to:"/admin/statistics"},"To Stats"))):null))))}}]),t}(l.Component),z=Object(v.b)(null,function(e){return{logOut:function(){return e({type:"LOGOUT"})}}})(q),J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={destination:"",description:"",startDate:"",endDate:"",cost:0,img:"",errorMsg:"",validForm:!0},a.getChangedValue=a.getChangedValue.bind(Object(b.a)(Object(b.a)(a))),a.addAVacation=a.addAVacation.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"getChangedValue",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"validateForm",value:function(){var e=[];""!==this.state.description&&"undefined"!==typeof this.state.description||e.push("Missing Description"),""!==this.state.destination&&"undefined"!==typeof this.state.destination||e.push("Missing Destination"),""!==this.state.startDate&&"undefined"!==typeof this.state.startDate||e.push("Missing Start Date"),""!==this.state.endDate&&"undefined"!==typeof this.state.endDate||e.push("Missing End Date"),(0===this.state.cost||this.state.cost.length>9)&&e.push("Invalid Cost"),e.length>0?this.setState(Object(g.a)({},this.state,{validForm:!1,errorMsg:e.join(" , ")})):this.setState(Object(g.a)({},this.state,{validForm:!0}))}},{key:"addAVacation",value:function(){var e=Object(I.a)(L.a.mark(function e(){var t,a=this;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validateForm();case 2:if(delete(t=Object(g.a)({},this.state)).errorMsg,delete t.validForm,!this.state.validForm){e.next=8;break}return e.next=8,fetch("http://localhost:3000/admin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){a.props.addVacation(e),a.props.toggle()}).catch(function(e){return e});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement(E.p,{isOpen:this.props.modal,toggle:this.props.toggle},c.a.createElement(E.s,null,"Add Vacation"),c.a.createElement(E.q,null,this.state.validForm?null:c.a.createElement(E.a,{color:"danger",id:"error"},c.a.createElement("h4",{className:"alert-heading"},"Not Valid"),this.state.errorMsg),c.a.createElement("div",{className:"container"},c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"Destination",onChange:this.getChangedValue,name:"destination",required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"Description",name:"description",onChange:this.getChangedValue,required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:6},"From",c.a.createElement(E.l,{placeholder:"Start Date",type:"date",name:"startDate",onChange:this.getChangedValue,required:!0})),c.a.createElement(E.i,{md:6},"To",c.a.createElement(E.l,{placeholder:"End Date",type:"date",name:"endDate",onChange:this.getChangedValue,required:!0})))," ",c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:9},c.a.createElement(E.l,{placeholder:"Cost",type:"number",name:"cost",onChange:this.getChangedValue,required:!0}))),c.a.createElement("br",null),c.a.createElement(E.z,null,c.a.createElement(E.i,{md:12},c.a.createElement(E.l,{placeholder:"Img URL",type:"text",name:"img",onChange:this.getChangedValue}))))),c.a.createElement(E.r,null,c.a.createElement(E.c,{color:"primary",onClick:this.addAVacation},"Add "),c.a.createElement(E.c,{color:"secondary",onClick:this.props.toggle},"Cancel")))}}]),t}(l.Component),G=Object(v.b)(null,function(e){return{addVacation:function(t){return e({type:"ADD",data:t})}}})(J),W=a(39),B=a.n(W),R=B()("http://localhost:3008"),$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={modal:!1,toStats:!1,logged:!0},a.toggle=a.toggle.bind(Object(b.a)(Object(b.a)(a))),a.delete=a.delete.bind(Object(b.a)(Object(b.a)(a))),a.update=a.update.bind(Object(b.a)(Object(b.a)(a))),a.getVacations=a.getVacations.bind(Object(b.a)(Object(b.a)(a))),Object(b.a)(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"componentDidMount",value:function(){var e=this;this.getVacations(),R.on("UPDATE_VACATIONS",function(){e.getVacations()})}},{key:"getVacations",value:function(){var e=this;""!=this.props.currentUser.firstName&&fetch("http://localhost:3000/admin",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.props.setVacations(e.setVacationsDates(t))}).catch(function(e){return e})}},{key:"delete",value:function(e){var t=this;fetch("http://localhost:3000/admin/".concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){window.confirm("Are you sure you want to Delete this Vacation ?")&&t.getVacations()}).catch(function(e){return e})}},{key:"update",value:function(e,t){var a=this;fetch("http://localhost:3000/admin/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){a.getVacations()}).catch(function(e){return e})}},{key:"drawControllTable",value:function(e){var t=this;if(0!=e.length)return e.map(function(e,a){return c.a.createElement(P,{vacation:e,index:a,key:a,delete:t.delete,update:t.update,onClick:t.getVacation})})}},{key:"setLogged",value:function(){var e=this;fetch("http://localhost:3000/logout",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState(Object(g.a)({},e.state,{logged:!1}))}).catch(function(e){return e})}},{key:"setVacationsDates",value:function(e){for(var t=0;t<e.length;t++)e[t].startDate=this.cutDateInfo(e[t].startDate),e[t].endDate=this.cutDateInfo(e[t].endDate);return e}},{key:"cutDateInfo",value:function(e){return e.length>10?e.substring(0,10):e}},{key:"moveToStats",value:function(){this.setState(Object(g.a)({},this.state,{toStats:!0}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"table-responsive"},this.state.toStats&&c.a.createElement(O.a,{to:"/admin/statistic"}),!this.state.logged&&c.a.createElement(O.a,{to:"/login"}),c.a.createElement(z,{currentUser:this.props.currentUser,toggle:this.toggle,loggingOut:this.setLogged.bind(this),stats:this.moveToStats.bind(this)}),c.a.createElement("br",null),c.a.createElement(E.A,{className:"table table-dark table-striped "},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"Destination"),c.a.createElement("th",null,"Description"),c.a.createElement("th",{className:"imgUrl"},"Image Url"),c.a.createElement("th",null,"Start Date"),c.a.createElement("th",null,"End Date"),c.a.createElement("th",null,"Cost"),c.a.createElement("th",null,"More"))),c.a.createElement("tbody",null,this.drawControllTable(this.props.allVacations))),c.a.createElement(G,{modal:this.state.modal,toggle:this.toggle}))}}]),t}(l.Component),H=Object(v.b)(function(e){return{allVacations:e.allVacations,currentUser:e.currentUser}},function(e){return{setVacations:function(t){return e(y(t))}}})($),_=a(78),Z=a.n(_),K=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={checked:a.props.isFollowed},a.addFollow=a.addFollow.bind(Object(b.a)(Object(b.a)(a))),a.decFollow=a.decFollow.bind(Object(b.a)(Object(b.a)(a))),a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),n=Object(b.a)(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e,t){e?n.addFollow(t):n.decFollow(t),this.setState({checked:e})}},{key:"addFollow",value:function(e){var t={vacationid:e.target.parentNode.parentNode.parentNode.id,userid:this.props.currentUser.id};fetch("http://localhost:3000/vacations/addfollow",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){n.props.followVacation(t.vacationid)}).catch(function(e){return e})}},{key:"decFollow",value:function(e){var t={vacationid:e.target.parentNode.parentNode.parentNode.id,userid:this.props.currentUser.id};fetch("http://localhost:3000/vacations/deletefollow",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){n.props.unfollowVacation(t.vacationid)}).catch(function(e){return e})}},{key:"ifFollowe",value:function(){}},{key:"render",value:function(){return c.a.createElement(Z.a,{onChange:this.handleChange,checked:this.state.checked,offColor:"#e6e6e6",onColor:"#0086b3",uncheckedIcon:!1,checkedIcon:!1,boxShadow:"1px 1px 1px 1px",activeBoxShadow:"0 0 2px 3px #3bf"})}}]),t}(l.Component),Q=Object(v.b)(function(e){return{currentUser:e.currentUser}},function(e){return{followVacation:function(t){return e(w(t))},unfollowVacation:function(t){return e(k(t))}}})(K),X=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={followd:!1},a.followClicked=a.followClicked.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"followClicked",value:function(){this.setState({followd:!this.state.followd})}},{key:"render",value:function(){var e=this.props.vacation,t=this.props.unvacation;return c.a.createElement("div",{className:"col-sm-4 mt-4"},c.a.createElement(E.d,{id:e&&e.id||t&&t.id},c.a.createElement(E.g,{className:"text-center"},e&&e.destination,t&&t.destination," "),c.a.createElement("img",{width:"100%",height:"80px",src:e&&e.img||t&&t.img,alt:"Vacation "}),c.a.createElement(E.e,null,c.a.createElement(E.h,null,c.a.createElement("b",null,"Dates :")," ",e&&e.startDate||t&&t.startDate,"  ",c.a.createElement("b",null,"To"),"  ",e&&e.endDate||t&&t.endDate),c.a.createElement("br",null),c.a.createElement(E.h,null,e&&e.description||t&&t.description),c.a.createElement(E.h,null,c.a.createElement("b",null,"Cost:")," $",e&&e.cost||t&&t.cost),c.a.createElement("h5",null,c.a.createElement(E.b,{style:{width:"80%"},color:"info"},"Current Followers : ",e&&e.following||t&&t.following))),c.a.createElement(E.f,{className:"text-center"},c.a.createElement(Q,{followedArr:this.props.followedArr,isFollowed:!!this.props.isFollowed}))))}}]),t}(l.Component),Y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={followed:[],unfollowed:[]},r=Object(b.a)(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getVacations(),this.socket=B()("http://localhost:3008"),this.socket.on("UPDATE_VACATIONS",function(){e.setState(Object(g.a)({},e.state,{followed:[],unfollowed:[]})),e.getVacations()})}},{key:"getVacations",value:function(){var e=this,t=this.props.currentUser.id;t&&fetch("http://localhost:3000/vacations",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userid:t})}).then(function(e){return e.json()}).then(function(t){e.finishLoading(t)}).catch(function(e){return e})}},{key:"cutDateInfo",value:function(e){return e.length>10?e.substring(0,10):e}},{key:"finishLoading",value:function(e){var t=this;fetch("http://localhost:3000/vacations/allfollowers",{method:"GET"}).then(function(e){return e.json()}).then(function(a){a.forEach(function(t){for(var a=0;a<e.length;a++)t.vacationid===e[a].id&&(e[a].following=t.followers)}),t.sortVacations(e),t.props.setVacations(e)}).catch(function(e){return e})}},{key:"sortVacations",value:function(e){for(var t=Object(g.a)({},this.state),a=0;a<e.length;a++)e[a].startDate=r.cutDateInfo(e[a].startDate),e[a].endDate=r.cutDateInfo(e[a].endDate),1===e[a].follows?t.followed.push(e[a]):t.unfollowed.push(e[a])}},{key:"setLogged",value:function(){var e=this;fetch("http://localhost:3000/logout",{method:"GET"}).then(function(e){return e.json()}).then(function(t){var a=Object(g.a)({},e.state,{data:t});e.setState(a)}).catch(function(e){return e}),this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(z,{currentUser:this.props.currentUser,loggingOut:this.setLogged.bind(this)}),c.a.createElement("div",{className:"row"},this.state.followed.map(function(t,a){return c.a.createElement(X,{vacation:t,key:a,isFollowed:!0,followedArr:e.state.followed})})),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},this.state.unfollowed.map(function(t,a){return c.a.createElement(X,{unvacation:t,key:a,isFollowed:!1,followedArr:e.state.followed})})))}}]),t}(l.Component),ee=Object(v.b)(function(e){return{allVacations:e.allVacations,currentUser:e.currentUser}},function(e){return{setVacations:function(t){return e(y(t))},followVacation:function(t){return e(w(t))},unfollowVacation:function(t){return e(k(t))}}})(Y),te=a(126),ae=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={followedVacations:[]},o=Object(b.a)(Object(b.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.currentUser.isAdmin&&fetch("http://localhost:3000/admin/statistic",{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.setState(Object(g.a)({},e.state,{followedVacations:t}));var a=document.getElementById("myChart");new te(a,{type:"bar",data:{labels:o.state.followedVacations.map(function(e){return e.destination}),datasets:[{data:o.state.followedVacations.map(function(e){return e.followers}),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{legend:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(E.w,{color:this.props.currentUser.isAdmin?"dark":"light",expand:"sm"},c.a.createElement(E.x,{style:{color:"blue"}}," Vacations "),c.a.createElement(E.y,null),c.a.createElement(E.j,{navbar:!0},c.a.createElement(E.t,{className:"ml-auto",navbar:!0},c.a.createElement(E.u,null,c.a.createElement(E.v,{style:{color:"blue"}},"Hello ",this.props.currentUser.firstName)),c.a.createElement(E.u,null,c.a.createElement(E.c,{color:"link"},c.a.createElement(j.a,{to:"/admin"}," Back > "))))))),c.a.createElement("div",{className:"chart-container",style:{position:"relative",height:"15vh",width:"40vw"}},c.a.createElement("canvas",{id:"myChart",width:"400",height:"400"})))}}]),t}(l.Component),ne=Object(v.b)(function(e){return{currentUser:e.currentUser}})(ae),re=T()(),oe=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement(D.a,{history:re},c.a.createElement("div",null,c.a.createElement(N.a,null,c.a.createElement(S.a,{path:"/login",component:V}),c.a.createElement(S.a,{path:"/register",component:x}),c.a.createElement(S.a,{exact:!0,path:"/admin/statistics",component:ne}),c.a.createElement(S.a,{path:"/admin",component:H}),c.a.createElement(S.a,{path:"/vacations",component:ee}),c.a.createElement(S.a,{exact:!0,path:"",component:V})))))}}]),t}(l.Component),le=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement(oe,null)}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(170);var ce=a(36),ie={allVacations:[],currentUser:{firstName:"",lastName:"",id:"",followedVacations:[],isAdmin:!1}},se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return(e=Object.assign({},t)).currentUser=a.data,e;case"LOGOUT":return(e=Object.assign({},t)).currentUser=ie.currentUser,e;case"ADD":return(e=Object(g.a)({},t)).allVacations.push(a.data),e;case"DELETE":return(e=Object(g.a)({},t)).allVacations.splice(a.data,1),e;case"EDIT":return(e=Object(g.a)({},t)).allVacations.forEach(function(e){e.id==a.data.newVacObj.id&&(e=a.data.newVacObj)}),e;case"SET":return(e=Object(g.a)({},t)).allVacations=a.data,e;case"FOLLOW":return(e=Object(g.a)({},t)).currentUser.followedVacations.push(a.data),e;case"UNFOLLOW":return(e=Object(g.a)({},t)).currentUser.followedVacations.splice(a.data,1),e;default:return t}},ue=Object(ce.b)(se);s.a.render(c.a.createElement(v.a,{store:ue},c.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){e.exports=a(172)},84:function(e,t,a){},90:function(e,t,a){},98:function(e,t,a){}},[[79,2,1]]]);
//# sourceMappingURL=main.d33358d5.chunk.js.map